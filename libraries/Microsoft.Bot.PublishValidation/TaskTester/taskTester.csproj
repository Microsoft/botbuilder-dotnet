<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>netcoreapp2.1</TargetFramework>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.Build.Utilities.Core" Version="15.8.166" />
  </ItemGroup>  

  <!--The next Targets validate if the project has a ".bot file"-->

  <!--This target uses a Custom Task class (ValidationTask) to validate if the project has a ".bot file" in its directory-->
  <UsingTask TaskName="TaskBuilder.ValidationTask" AssemblyFile="..\TaskBuilder\bin\Debug\netcoreapp2.1\TaskBuilder.dll" />
  <Target Name="CheckFileCustoomTask" AfterTargets="Build">
    <!--The Validation Task receives as a parameter the Project Directory path-->
    <ValidationTask DirectoryPath="$(MSBuildProjectDirectory)" />
  </Target>

  <!--This target uses an inline Task class to validate if the project has a ".bot file" in its directory-->
  <Target Name="CheckFileTask" AfterTargets="Build">
    <!--This item contains the file to validate (i.e, any ".bot"file)-->
    <ItemGroup>
      <_DeployToItem Include="$(MSBuildProjectDirectory)\*.bot" />
    </ItemGroup>
    <!--The next line raises an error if the file declared previously (with a wildcard to check for any .bot file) doesn't exists in the project directory-->
    <Error Condition="!Exists('%(_DeployToItem.FullPath)')" Text="%(_DeployToItem.FullPath)" />
  </Target>

</Project>
